<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Automated Design Tool for Arduino Circuits, ADArC</title>

  <!-- "/" for local testing; "/ADArCWebApp/" in deployment -->
  <base href="/" />

  <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
  <link href="css/app.css" rel="stylesheet" />
  <link href="ADArCWebApp.styles.css" rel="stylesheet" />
  <link href="manifest.json" rel="manifest" />
  <link rel="icon" type="image/x-icon" href="favicon.ico" />

  <!-- Intro.js (CDN) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/7.2.0/introjs.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/7.2.0/intro.min.js"></script>

  <!-- BlazorMonaco interop -->
  <script src="_content/BlazorMonaco/jsInterop.js"></script>

  <!-- Monaco AMD loader -->
  <script src="_content/BlazorMonaco/lib/monaco-editor/min/vs/loader.js"></script>

  <script>
    // Configure Monaco's AMD loader
    require.config({
      paths: {
        vs: "_content/BlazorMonaco/lib/monaco-editor/min/vs"
      }
    });

    // Load Monaco first, then load our AMD bundle, then start interopManager.
    // This avoids the loader trying to fetch /lib/execute.js etc.
    require(["vs/editor/editor.main"], function () {
      // Load your compiled AMD bundle (defines lib/execute, lib/compile-util, interopManager, etc.)
      var s = document.createElement("script");
      s.src = "build/build.js";
      s.onload = function () {
        // Start your app module after build.js has registered all defines
        require(["interopManager"], function () { });
      };
      document.head.appendChild(s);
    });
  </script>

  <!-- Optional: local intro css override (only keep if the file exists) -->
  <!-- <link rel="stylesheet" href="lib/intro.js/introjs.css"> -->
</head>

<body>
  <div id="app">
    <svg class="loading-progress">
      <circle r="40%" cx="50%" cy="50%" />
      <circle r="40%" cx="50%" cy="50%" />
    </svg>
    <div class="loading-progress-text"></div>
  </div>

  <!-- Clear cache on load -->
  <script>
    caches.delete("blazor-resources-/").then(function () {
      console.log("'blazor-resources-/' cache deleted");
    });
  </script>

  <script>
    window.triggerClick = (elt) => elt.click();
  </script>

  <script src="_framework/blazor.webassembly.js"></script>
  <script>
    navigator.serviceWorker.register("service-worker.js");
  </script>
</body>
</html>
